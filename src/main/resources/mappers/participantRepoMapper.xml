<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="Participant">

    <insert id="saveParticipant" parameterType="participantDTO" useGeneratedKeys="true" keyProperty="participantId">
        INSERT INTO participants (user_id, participant_name, birth_year, birth_month, gender, grade)
        VALUES (#{userId}, #{participantName}, #{birthYear}, #{birthMonth}, #{gender}, #{grade})
    </insert>

    <update id="updateParticipantGrade" parameterType="map">
        UPDATE participants
        SET grade = #{newGrade}, updated_at = CURRENT_TIMESTAMP
        WHERE participant_id = #{participantId}
    </update>

</mapper>
